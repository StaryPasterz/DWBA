# DWBA Ionization Calculation Configuration
# Example: Hydrogen 1s ionization

run_name: "H_1s_ionization_example"

calculation:
  type: "ionization"

target:
  atom: "H"              # Atom from atoms.json: H, He, Li, Ne, Ar, etc.

states:
  initial:
    n: 1
    l: 0                 # 1s state (ionization from ground state)
  final:
    n: 1                 # Not used for ionization
    l: 0

physics:
  model: "static"        # "static" (article DWBA) or "polarization" (heuristic)

energy:
  type: "log"            # Grid type: "single", "linear", "log", "list"
  start_eV: 15.0         # [eV] Start energy (above ionization threshold 13.6 eV for H)
  end_eV: 500.0          # [eV] End energy
  density: 1.0           # [dimensionless] Log grid density (balanced quality)

grid:
  strategy: "local"      # "manual" = fixed params, "global" = adaptive for E_min, "local" = per-energy (best quality)
  r_max: "auto"          # [a.u.] Use physics-based auto scaling in adaptive modes
  n_points: 1500         # [count] Base grid points (minimum for adaptive modes)
  r_max_scale_factor: 2.8  # [dimensionless] More conservative turning-point margin for quality
  n_points_max: 20000    # [count] Maximum allowed grid points (caps adaptive scaling)
  min_points_per_wavelength: 18  # [count] Higher sampling at high energy

ionization:
  l_eject_max: 4         # [dimensionless] Maximum ejected electron angular momentum
  L_max: 18              # [dimensionless] Multipole L_max
  L_max_projectile: 60   # [dimensionless] Base projectile L (runtime auto-scales with energy)
  n_energy_steps: 16     # [count] SDCS integration steps

oscillatory:
  method: "full_split"           # "legacy" | "advanced" | "full_split" (best quality)
  CC_nodes: 7                    # [count] Clenshaw-Curtis nodes per interval
  phase_increment: 1.5708        # [rad] Phase increment (Ï€/2)
  min_grid_fraction: 0.1         # [dimensionless] Minimum match point fraction
  k_threshold: 0.5               # [a.u.] Momentum threshold for Filon/Levin
  max_chi_cached: 20             # [count] LRU cache size for continuum waves on GPU
  phase_extraction: "hybrid"     # [v2.11+] "hybrid", "logderiv", or "lsq"
  solver: "rk45"                 # [v2.13+] "auto", "rk45" (recommended), "johnson", "numerov"

hardware:
  gpu_block_size: "auto"         # "auto" = auto-tune, int = explicit size
  gpu_memory_mode: "auto"        # "auto" | "full" | "block"
  gpu_memory_threshold: 0.75     # [dimensionless] Slightly safer margin for mixed desktop usage
  n_workers: "max"               # "auto" (balanced), "max" (all cores), or int

output:
  save_dcs: true                 # Save differential cross section
  save_partial: true             # Save partial wave contributions
  calibrate: false               # Ionization is not calibrated by Tong model
